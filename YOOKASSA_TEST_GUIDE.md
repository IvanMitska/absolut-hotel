# Инструкция по тестированию платежной системы ЮКасса

## 1. Подготовка к тестированию

### Проверьте настройки:
- В файле `.env` установлены тестовые ключи ЮКассы
- Сайт развернут на Netlify с переменными окружения

## 2. Процесс тестирования

### Шаг 1: Перейдите на страницу бронирования
1. Откройте сайт https://absolute-hotel-vityazevo.ru
2. Нажмите "Забронировать" или перейдите на /booking

### Шаг 2: Заполните форму бронирования
1. Выберите номер
2. Укажите даты заезда и выезда
3. Укажите количество гостей
4. Заполните контактные данные:
   - Имя и фамилия
   - Телефон
   - Email

### Шаг 3: Выберите способ оплаты
1. В разделе "Подтверждение и оплата" выберите "Оплата онлайн"
2. Поставьте галочку согласия с условиями
3. Нажмите "Перейти к оплате"

### Шаг 4: Тестовая оплата в ЮКассе
После нажатия вы будете перенаправлены на страницу оплаты ЮКассы.

**Для успешной тестовой оплаты используйте:**
- Номер карты: `5555 5555 5555 4444`
- Срок действия: любая дата в будущем
- CVV: любые 3 цифры
- 3-D Secure пароль: `123456`

**Для проверки отклоненного платежа:**
- Номер карты: `5555 5555 5555 4477`

### Шаг 5: Проверьте результат
После оплаты вы будете перенаправлены на страницу /payment-result с результатом платежа.

## 3. Проверка в личном кабинете ЮКассы

1. Войдите в личный кабинет ЮКассы
2. Перейдите в раздел "Платежи"
3. Проверьте, что тестовый платеж отображается в списке

## 4. Переход на боевой режим

После успешного тестирования:

1. В личном кабинете ЮКассы нажмите "Сайт полностью готов"
2. Получите боевые ключи в разделе "Настройки" → "Ключи API"
3. Обновите переменные окружения в Netlify:
   - `YOOKASSA_SHOP_ID` - боевой Shop ID
   - `YOOKASSA_SECRET_KEY` - боевой секретный ключ
4. Удалите или обновите файл `.env` с боевыми ключами

## Важные замечания

- Тестовые платежи не списывают реальные деньги
- В тестовом режиме доступны только тестовые карты
- После перехода на боевой режим обязательно проведите пробный платеж небольшой суммы

## Возможные проблемы

**Ошибка "Failed to create payment":**
- Проверьте правильность ключей в переменных окружения Netlify
- Убедитесь, что функции Netlify развернуты корректно

**Не происходит редирект после оплаты:**
- Проверьте настройку VITE_PAYMENT_RETURN_URL в переменных окружения